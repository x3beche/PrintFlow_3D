<app-sidebar></app-sidebar>
<div class="flex flex-col h-screen bg-black font-inter"
  [ngClass]="{ 'sm:ml-48': !sidebarCollapsed, 'sm:ml-12': sidebarCollapsed }">
  <app-header header_title="Dashboard"></app-header>
  
  <!-- ✅ Ana container - responsive padding ve max-width -->
  <div class="flex-1 p-2 sm:p-3 lg:p-4 bg-black overflow-hidden flex items-center justify-center">
    
    <!-- ✅ Responsive container -->
    <div class="w-full max-w-full lg:max-w-[90%] xl:max-w-[85%] 2xl:max-w-[80%] h-full flex flex-col gap-2 sm:gap-3">

      <!-- ✅ Üst kısım - Responsive grid -->
      <div class="grid grid-cols-1 xl:grid-cols-12 gap-2 sm:gap-3 flex-1 min-h-0">

<!-- ✅ Sol taraf - Continuing Tasks -->
<div class="xl:col-span-7 bg-neutral-900 border border-zinc-700 hover:border-zinc-600 transition-colors duration-150 shadow-xl flex flex-col overflow-hidden">
  
  <!-- Header -->
  <div class="p-3 sm:p-4 flex-shrink-0 border-b border-zinc-700">
    <h2 class="text-base sm:text-lg font-semibold text-white font-inter">Welcome Back</h2>
  </div>

  <!-- Scroll container -->
  <div class="flex-1 flex flex-col gap-2 p-2 sm:p-3 overflow-y-auto min-h-0">
    <div *ngFor="let task of continuingTasks">
      <app-adopted-task
        [orderId]="task.orderId"
        [previewId]="task.image"
        [assignedDate]="task.date"
        [name]="task.name"
        [currentStatus]="task.currentStatus || 'Assigned to Manufacturer'"
      ></app-adopted-task>
    </div>
  </div>

  <!-- Pagination -->
  <div class="p-2 sm:p-3 flex flex-col sm:flex-row items-start sm:items-center justify-between gap-2 flex-shrink-0 border-t border-zinc-700">
    <span class="text-[10px] sm:text-xs text-neutral-400 font-medium font-inter">
      Showing {{ getContinuingTasksStartIndex() }}-{{ getContinuingTasksEndIndex() }} of {{ allContinuingTasks.length }} entries
    </span>
    <div class="flex bg-neutral-800 border border-zinc-700 overflow-hidden">
      <button 
        (click)="previousContinuingTasksPage()"
        [disabled]="continuingTasksPage === 1"
        class="px-2 sm:px-3 py-1 sm:py-1.5 text-[10px] sm:text-xs text-white hover:bg-neutral-700 border-r border-zinc-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed font-inter">
        Previous
      </button>
      <button 
        *ngFor="let page of getContinuingTasksPageNumbers()"
        (click)="goToContinuingTasksPage(page)"
        [ngClass]="{
          'bg-yellow-400 text-black font-bold': page === continuingTasksPage,
          'text-white hover:bg-neutral-700': page !== continuingTasksPage
        }"
        class="px-2 sm:px-3 py-1 sm:py-1.5 text-[10px] sm:text-xs border-l border-zinc-700 transition-colors font-inter">
        {{ page }}
      </button>
      <button 
        (click)="nextContinuingTasksPage()"
        [disabled]="continuingTasksPage === continuingTasksTotalPages"
        class="px-2 sm:px-3 py-1 sm:py-1.5 text-[10px] sm:text-xs text-white hover:bg-neutral-700 border-l border-zinc-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed font-inter">
        Next
      </button>
    </div>
  </div>
</div>


        <!-- ✅ Sağ taraf - Summary (4 Graph) -->
        <div class="xl:col-span-5 bg-neutral-900 border border-zinc-700 hover:border-zinc-600 transition-colors duration-150 shadow-xl flex flex-col overflow-hidden">
          
          <!-- Header -->
          <div class="p-3 sm:p-4 flex-shrink-0 border-b border-zinc-700">
            <h2 class="text-base sm:text-lg font-semibold text-white font-inter">Summary</h2>
          </div>
          
          <!-- Graph container -->
          <div class="flex-1 p-3 sm:p-2 flex items-stretch min-h-0">
            <div class="grid grid-cols-2 gap-2 sm:gap-3 w-full">
              
              <div *ngFor="let stat of summaryStats" class="bg-neutral-800 border border-zinc-700 flex items-center justify-center hover:border-zinc-600 transition-colors duration-150 min-h-[120px] sm:min-h-[140px]">
                <app-graph 
                  [value]="stat.value" 
                  [count]="stat.count"
                  [label]="stat.label"
                  [reverseColor]="true">
                </app-graph>
              </div>
            </div>
          </div>
        </div>

      </div>

      <!-- ✅ Alt kısım - Available Tasks -->
      <div class="bg-neutral-900 border border-zinc-700 hover:border-zinc-600 transition-colors duration-150 shadow-xl flex flex-col flex-1 min-h-0 overflow-hidden">
        
        <!-- Header -->
        <div class="p-3 sm:p-4 flex-shrink-0 border-b border-zinc-700">
          <h2 class="text-base sm:text-lg font-semibold text-white font-inter">Available Tasks</h2>
        </div>

        <!-- Scroll container -->
        <div class="flex-1 flex flex-col gap-1.5 sm:gap-2 overflow-y-auto custom-scrollbar p-2 sm:p-2 min-h-0">
          <div *ngFor="let task of availableTasks" class="flex-1 min-h-[80px] sm:min-h-[90px]">
            <!-- ✅ Değişken adını 'order' yerine 'task' yap -->
            <app-non-adopted-task
              [orderId]="task.orderId"
              [name]="task.name"
              [createdDate]="task.date"
              [previewId]="task.image"
              (orderRejected)="onOrderRejected($event)">
            </app-non-adopted-task>
          </div>
        </div>

        <!-- Pagination -->
        <div class="p-2 sm:p-3 flex flex-col sm:flex-row items-start sm:items-center justify-between gap-2 flex-shrink-0 border-t border-zinc-700">
          <span class="text-[10px] sm:text-xs text-neutral-400 font-medium font-inter">
            Showing {{ getAvailableTasksStartIndex() }}-{{ getAvailableTasksEndIndex() }} of {{ allAvailableTasks.length }} entries
          </span>
          <div class="flex bg-neutral-800 border border-zinc-700 overflow-hidden">
            <button 
              (click)="previousAvailableTasksPage()"
              [disabled]="availableTasksPage === 1"
              class="px-2 sm:px-3 py-1 sm:py-1.5 text-[10px] sm:text-xs text-white hover:bg-neutral-700 border-r border-zinc-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed font-inter">
              Previous
            </button>
            <button 
              *ngFor="let page of getAvailableTasksPageNumbers()"
              (click)="goToAvailableTasksPage(page)"
              [ngClass]="{
                'bg-yellow-400 text-black font-bold': page === availableTasksPage,
                'text-white hover:bg-neutral-700': page !== availableTasksPage
              }"
              class="px-2 sm:px-3 py-1 sm:py-1.5 text-[10px] sm:text-xs border-l border-zinc-700 transition-colors font-inter">
              {{ page }}
            </button>
            <button 
              (click)="nextAvailableTasksPage()"
              [disabled]="availableTasksPage === availableTasksTotalPages"
              class="px-2 sm:px-3 py-1 sm:py-1.5 text-[10px] sm:text-xs text-white hover:bg-neutral-700 border-l border-zinc-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed font-inter">
              Next
            </button>
          </div>
        </div>
      </div>

    </div>
    
  </div>
</div>